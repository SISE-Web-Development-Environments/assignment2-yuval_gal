<html>
<head>
    <script src="./jquery-3.4.1.slim.min.js"></script>
    <script>var userNameAndPassward = [{userName:"p", passward:"p"}];</script>
    <script type="text/javascript" src="./app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="main.css">
    <script src="js/form-validation.js"></script>
    <script src="jquery.min.js"></script>
    <script src="jquery.validate.min.js"></script>
    
</head>
<body>
    <!-- Tab links -->
    <div class="nav">
        <button class="navbuttons" onclick="openRelevantWindow(event, 'Welcome')">Welcome</button>
        <button class="navbuttons" id="signupButton" onclick="openRelevantWindow(event, 'signup')">Sign Up</button>
        <button class="navbuttons" id="loginButton" onclick="openRelevantWindow(event, 'login')">Login</button>
        <button class="navbuttons" id="gameButton" onclick="openRelevantWindow(event, 'game')">Game</button>
        <button class="navbuttons" id="logoutButton" onclick="logoutUser(event)">Log out</button>
    </div>

    <!-- Tab content -->
    <div id="Welcome" class="window_content">
        <h3>Welcome to The awesome Pacman game!</h3>
        <p>This is our game, if you want to play, please signup for it.</p>
    </div>

    <div id="signup" class="window_content sign-up-form">
        <img src="signupiconNobackground.png" class="signup-icon">
        <h3>Sign Up Now</h3>
        <form id="signup-form" name="signUpForm" method="ge" action novalidate="novalidate">
            <input type="text" class="input-box" name="userName" id="signupUsername" placeholder="Enter Username" >
            <input type="password" class="input-box passClass" name="password" id="signupPass" placeholder="Your Password" >
            <input type="password" class="input-box passClass" name="checkPassword" id="signupPassConfirm" placeholder="Confirm Password" >
            <input type="text" class="input-box" name="fullName" id="signupFullName" placeholder="Enter Full Name" >
            <input type="email" class="input-box" name="email" id="signupEmail" placeholder="Enter Email" >
            <input type="date" class="input-box" name="bDay" id="signupBDay" placeholder="Enter BDay" >
            <!--            <p><span><input type="checkbox"></span> I agree to the terms of services</p>-->
            <button type="submit" class="signup-btn" onclick="signUp()">Sign Up</button>
        </form>
        <script>
            $("#signup-form").validate();
        </script>
    </div>

    <div id="login" class="window_content">
        <form >
            <div id="loginForm">
                <h1>Login</h1>
                <i class="fa fa-user" aria-hidden="true"></i>
                <label for=userName></label> Username: </label>
                <input type="text" placeholder="Enter Username" id="userName" autocomplete="off" required>
                <br>
                <br>
                <i class="fa fa-lock" aria-hidden="true"></i>
                <label for=password>Password: </label>
                <input type="password" placeholder="Enter Password" id="password" autocomplete="off" required>
                <br>
                <br>
                <button type="button" onclick="Login()">Login</button>
            </div>
        </form>
    </div>

    <div id="game" class="window_content">
        <div id="score">
            <label for="lblScore">SCORE:</label>
            <input id="lblScore" type="text" />
        </div>

        <div id="time">
            <label for="lblTime">TIME:</label>
            <input id="lblTime" type="text" />
        </div>

        <div id="actual_game">
            <canvas id="canvas" height="600" width="600"></canvas>
        </div>
    </div>


    <script>
        function openRelevantWindow(evt, cityName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("window_content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("navbuttons");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(cityName).style.display = "block";

            evt.currentTarget.crrTrgt.className += " active";

        }
    </script>

    <script class="loginScript">
        function Login(){

            var userName = document.getElementById('userName').value;
            var passward = document.getElementById('password').value;

            for(i=0; i < userNameAndPassward.length; i++){
                if(userName=== userNameAndPassward[i].userName && passward === userNameAndPassward[i].passward){
                    document.getElementById("gameButton").style.display = "block";;
                    document.getElementById("logoutButton").style.display = "block";;
                    document.getElementById("loginButton").style.display = "none";
                    document.getElementById("login").style.display = "none";
                    document.getElementById("signupButton").style.display = "none";

                    pageToShow = document.getElementById("Welcome");
                    pageToShow.style.display = "block";

                    console.log("userName: "+ userName +" Passward: "+ passward+ " login successfully");
                    return
                }
            }
            alert("Wrong username or password please  try again");
            console.log("Wrong username or password please try again");
        }
    </script>

    <script class="signUpScript">
        function signUp(){
            var userName = document.getElementById('signupUsername').value;
            var password = document.getElementById('signupPass').value;
            var confirmPassword = document.getElementById('signupPassConfirm').value;

            if(password !== confirmPassword)
            {
                alert("Password are not the same");
                return;
            }


            for(i=0; i < userNameAndPassward.length; i++){
                if(userName=== userNameAndPassward[i].userName){
                    alert("userName: "+ userName + " is already taken");
                    return;
                }
            }

            userNameAndPassward.push({"Username": userName, "Password": password});
            console.log("User signed up successfully");

            alert("You can now login.")

            document.getElementById("signup-form").style.display = none;


        }
    </script>
</body>

</html>